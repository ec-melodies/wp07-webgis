"use strict";angular.module("MainModule",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","pascalprecht.translate","ngDialog","OverviewModule"]).config(["$routeProvider","$translateProvider",function(a,b){a.when("/",{templateUrl:"modules/overview/Overview.html",controller:"overviewController",controllerAs:"main"}).otherwise({redirectTo:"/"}),b.useStaticFilesLoader({files:[{prefix:"resources/locales/locale-",suffix:".json"}]}),b.useSanitizeValueStrategy("sanitize"),b.preferredLanguage("en")}]),angular.module("OverviewModule",[]),angular.module("OverviewModule").controller("overviewController",["$scope","$interval","ngDialog","overviewMapService",function(a,b,c,d){d.initMap(),d.isMapInitialized().then(function(){a.layers=d.getWmsLayers(),a.sortLayers(),d.retrieveJobInformation()}),a.isLayerVisible=function(a){return a.instance.getVisible()},a.setLayerVisible=function(a,b){var c=a.target;b.instance.setVisible(c.checked)},a.zoomToLayer=function(a){d.zoomToLayer(a.instance)},a.deleteLayer=function(b){c.openConfirm({template:"modules/overview/OverviewConfirmationDialog.html",data:{itemName:b.Title},className:"ngdialog-theme-default general-confimation-dialog"}).then(function(){d.deleteLayer(b).then(function(){a.refreshLayers()})})},a.downloadLayer=function(a){d.retrieveWPSResultLinks(a.statusLocation,a.layerIdentifier).then(function(a){if(void 0!==a){var b=document.createElement("a");b.style.display="none",document.body.appendChild(b);for(var c=0;c<a.length;c++)b.setAttribute("download",a[c].name),b.setAttribute("href",a[c].link),b.click();document.body.removeChild(b)}})},a.moveLayerDown=function(b){d.moveLayer(a.layers,b,b+1)},a.moveLayerUp=function(b){d.moveLayer(a.layers,b,b-1)},a.sortLayers=function(){a.layers=a.layers.sort(function(a,b){return a.instance.getZIndex()<=b.instance.getZIndex()?1:-1})},a.openHelpDialog=function(){c.open({template:"modules/overview/OverviewHelpDialog.html",controller:"overviewHelpDialogController",className:"ngdialog-theme-default menu-dialog-help"})},a.openProcessInvokeDialog=function(b,d,e){c.closeAll(),a.tileIds=e;var f=c.open({template:"modules/overview/OverviewProcessDialog.html",controller:"overviewLULCDialogController",className:"ngdialog-theme-default",data:{processIdentifier:b,processTitle:d},scope:a});f.closePromise.then(function(){a.tileIds=void 0})},a.openTileSelectionDialog=function(b,d){if(void 0===a.tileSelectionDialogId||!c.isOpen(a.tileSelectionDialogId)){var e=c.open({template:"modules/overview/OverviewTileSelectionDialog.html",controller:"overviewTileSelectionController",className:"ngdialog-theme-default menu-dialog-tile-selection-light",scope:a,trapFocus:!1,closeByDocument:!1,overlay:!1,data:{processIdentifier:b,processTitle:d}});a.tileSelectionDialogId=e.id,e.closePromise.then(function(){a.tileSelectionDialogId=void 0})}},a.refreshLayers=function(){d.refreshInformation().then(function(){a.layers=d.getWmsLayers(),a.sortLayers(),d.retrieveJobInformation()})},b(a.refreshLayers,3e4)}]),angular.module("OverviewModule").controller("overviewHelpDialogController",function(){}),angular.module("OverviewModule").controller("overviewLULCDialogController",["$scope","overviewMapService","ngDialog",function(a,b,c){var d=a.ngDialogData.processIdentifier;a.values={},a.errorMessage="",a.addValues={},b.getWPSInformation(d).then(function(b){a.parameters=b;for(var c=0;c<a.parameters.length;c++){a.values[a.parameters[c].identifier]=[];var d=a.parameters[c].defaultValues;if(d){var e=d.split(",");if(e.length>1&&a.parameters[c].multiple)for(var f=0;f<e.length;f++)a.values[a.parameters[c].identifier].push(e[f]);else a.addValues[a.parameters[c].identifier]=d}if("tiles"===a.parameters[c].identifier&&void 0!==a.$parent.tileIds&&a.$parent.tileIds.length>0){a.values[a.parameters[c].identifier]=[];for(var g=0;g<a.$parent.tileIds.length;g++)a.values[a.parameters[c].identifier].push(a.$parent.tileIds[g].toString())}}},function(b){a.serviceError=b}),a.addValue=function(b){for(var c=0;c<a.parameters.length;c++){var d=a.parameters[c];if(b===d.identifier&&!d.multiple)return}a.values[b].push(a.addValues[b]),a.addValues[b]="",a.errorMessage=""},a.removeValue=function(b,c){a.values[b].splice(c,1),a.errorMessage=""},a.runProcess=function(){a.errorMessage="";for(var e={},f=Object.keys(a.values),g=0;g<f.length;g++)e[f[g]]=a.values[f[g]].filter(Boolean),0===e[f[g]].length&&delete e[f[g]];for(var h=0;h<a.parameters.length;h++){var i=a.parameters[h];i.multiple||(e[i.identifier]=a.addValues[i.identifier])}b.executeWPSProcess(d,e).then(function(a){c.closeAll(),c.open({template:"modules/overview/OverviewProcessSuccessDialog.html",data:{processId:a.id},className:"ngdialog-theme-default menu-lulc-confimation-dialog"})},function(b){a.errorMessage=b.text})}}]),angular.module("OverviewModule").controller("overviewTileSelectionController",["$scope","overviewMapService",function(a,b){a.dialogId=a.ngDialogId;var c=function(){angular.element("#map").addClass("default-tile-selection-cursor"),b.getTileGridLayer().setVisible(!0),a.selectInteraction=new ol.interaction.Select({style:new ol.style.Style({stroke:new ol.style.Stroke({color:"#DEDEDE",width:1}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.6)"})})}),b.getMap().addInteraction(a.selectInteraction);var c=a.selectInteraction.getFeatures();a.dragBoxInteraction=new ol.interaction.DragBox({}),b.getMap().addInteraction(a.dragBoxInteraction),a.dragBoxInteraction.on("boxend",function(){var d=a.dragBoxInteraction.getGeometry().getExtent();b.getTileGridLayer().getSource().getSource().forEachFeatureIntersectingExtent(d,function(a){c.push(a)}),angular.element("#proceed-button").focus()}),a.dragBoxInteraction.on("boxstart",function(){c.clear()}),b.getMap().on("click",function(){c.clear()})},d=function(){b.getTileGridLayer().setVisible(!1),b.getMap().removeInteraction(a.selectInteraction),b.getMap().removeInteraction(a.dragBoxInteraction),angular.element("#map").removeClass("default-tile-selection-cursor")};a.selectedTiles=function(){for(var b=a.selectInteraction.getFeatures().getArray(),c=[],d=0;d<b.length;d++)c.push(b[d].get("PR"));return c},c(),a.$on("ngDialog.closing",function(b,c){a.dialogId===c.attr("id")&&d()})}]),angular.module("OverviewModule").service("overviewMapService",["$q","$interval","$http",function(a,b,c){function d(a){for(var b=Object.keys(O),c=0;c<b.length;c++)if(a.indexOf(b[c])>-1)return a.replace(b[c],O[b[c]]);return a}function e(){return R}function f(){var c=0;if(y&&T)return a.when("Map is initialized.");var d,e=a.defer(),f=function(){3!==c||void 0!==y&&T||(e.reject("Map is not initialized after "+c+" attempts."),b.cancel(d)),y&&T&&(e.resolve("Map is initialized."),b.cancel(d)),c++};return d=b(f,1e3,5),e.promise}function g(){var a=new ol.control.ScaleLine({className:"maritime-ol-scale-line"}),b=new ol.control.Zoom({className:"maritime-ol-zoom",zoomInLabel:"",zoomOutLabel:""}),c=new ol.control.MousePosition({coordinateFormat:ol.coordinate.createStringXY(4),projection:"EPSG:4326",className:"maritime-ol-mouse-position",undefinedHTML:"&nbsp;"}),d=new ol.control.Attribution({className:"maritime-ol-attribution",target:"legend-body"});y=new ol.Map({controls:[b,a,c,d],target:"map",layers:[new ol.layer.Tile({minResolution:0,maxResolution:75,source:new ol.source.BingMaps({key:"AvTWKTLWtjFFPJ_vztdefK5KOmG-pjCIVsh03s-5VQH1rxMtAuRjRMQ4X6av17KW",imagerySet:"Aerial",maxZoom:19}),baseLayer:!0}),new ol.layer.Tile({minResolution:75,maxResolution:2e4,source:new ol.source.MapQuest({layer:"sat"}),baseLayer:!0})],view:new ol.View({center:ol.proj.transform([-9,40],C,D),zoom:5,minZoom:A,maxZoom:B})});var e=new ol.source.Vector({url:"resources/data/WRS2-descending-new.geojson",format:new ol.format.GeoJSON});z=new ol.layer.Image({source:new ol.source.ImageVector({source:e,style:U()}),visible:!1,zIndex:1e3,baseLayer:!0}),y.addLayer(z),h()}function h(){k();var c=0;if(y&&T)return a.when("Map already refreshed");var d,e=a.defer(),f=function(){3!==c||void 0!==y&&T||(e.reject("Map is not refreshed after "+c+" attempts."),b.cancel(d)),y&&T&&(e.resolve("Map is initialized."),b.cancel(d)),c++};return d=b(f,1e3,5),e.promise}function i(){return y.getLayers().getArray().filter(function(a){return void 0===a.get("baseLayer")})}function j(){for(var a,b,c,d,e=i(),f=0;f<e.length;f++){a=!1,d=e[f].get("name");for(var g=0;g<R.length;g++)if(c=R[g].Name,d===c){a=!0;break}a||y.removeLayer(e[f])}e=i();for(var h=0;h<R.length;h++){c=R[h].Name,b=!1;for(var j=0;j<e.length;j++)if(d=e[j].get("name"),d===c){b=!0;break}if(!b){var k=[];k.push(new ol.Attribution({html:"<div>"+R[h].Title+"<img id='GEOSERVER' src="+K+R[h].Name+"></div>"})),R[h].instance=new ol.layer.Tile({source:new ol.source.TileWMS({url:G+"/geoserver/wms",params:{FORMAT:"image/png",VERSION:"1.3.0",tiled:!0,STYLES:"",TRANSPARENT:!0,ENV:"",LAYERS:R[h].Name,CRS:D},attributions:k}),visible:!1,extent:V(R[h]),zIndex:i().length,name:R[h].Name}),y.addLayer(R[h].instance)}}e=i(),e=e.sort(function(a,b){return a.getZIndex()<=b.getZIndex()?-1:1});for(var l=0;l<e.length;l++)e[l].setZIndex(l)}function k(){T=!1,c.get(H).then(function(a){for(var b=a.data,d=0;d<b.length;d++)Q[b[d].id]=b[d];return c.get(J)}).then(function(a){var b=S.read(a.data),c=b.Capability.Layer.Layer;if(void 0!==c){c=c.filter(function(a){return a.Name.startsWith(E)});for(var d=c.length-1;d>=0;d--){for(var e=c[d].Name,f=!1,g=R.length-1;g>=0;g--){var h=R[g].Name;if(e===h){f=!0;break}}f&&(c[d].instance=R[g].instance)}R=c;for(var i=R.length-1;i>=0;i--){var k=R[i].Name;k=k.replace(E+":","");var l=k.split("--");k=l[0],R[i].layerJobId=k,R[i].downloadAvailable=!1,R[i].layerIdentifier=l[1],R[i].statusLocation=void 0!==Q[k]?Q[k].statusLocation:void 0,R[i].processId=void 0!==Q[k]?Q[k].jobId:void 0}}j(),T=!0})}function l(b,e){var f=a.defer(),g=s(),h="&dataInputs=",i=Object.keys(e);if(0!==i.length)for(var j=0;j<i.length;j++)void 0!==e[i[j]]&&(h=h+i[j]+"="+e[i[j]].toString()+";");else h="";var k=h+F+"="+g,l=P[b].wpsUrl,n=P[b].processId;return c.get(d(l+N)+n+k).success(function(a){var b,e=xml.xmlToJSON(a),i=m(e);if(i&&f.reject({id:void 0,text:i}),void 0!==e.ExecuteResponse){var j=e.ExecuteResponse.Status;if(j.ProcessAccepted){var k=e.ExecuteResponse["@statusLocation"];b=d(k);var l;c.get(b).then(function(a){var d=xml.xmlToJSON(a.data);return l=q(d),l.status?c.post(H,{id:g,creationTime:l.creationTime,statusLocation:b,inputs:h}):void f.reject({id:l.id,text:l.text})}).then(function(a){void 0!==a?f.resolve({id:a.data.jobId,text:l.text}):f.reject({id:l.id,text:l.text})})}}}).error(function(a){f.reject(a)}),f.promise}function m(a){if(void 0!==a.ExceptionReport){var b="",c=a.ExceptionReport.Exception;b=$.isArray(c)?c[0]:c;var d=b.ExceptionText;return void 0!==d&&(d=d.replace("java.lang.RuntimeException: ","")),d}}function n(b,e){var f=a.defer();return c.get(b).then(function(a){var b=xml.xmlToJSON(a.data),e=b.ExecuteResponse.ProcessOutputs.Output.Data.ComplexData.Reference["@href"];return c.get(d(e))},function(a){f.reject(a)}).then(function(a){for(var b=[],c=xml.xmlToJSON(a.data),g=c.metalink.files.file,h=0;h<g.length;h++){var i=g[h]["@name"],j=e.replace("_gen","");i.startsWith(j)&&b.push({name:i,link:d(g[h].resources.url.Text)})}f.resolve(b)}),f.promise}function o(a,b){c.get(a).then(function(a){var c=!1,d=xml.xmlToJSON(a.data),e=q(d),f=e.text;if(e.status){var g=d.ExecuteResponse.ProcessOutputs;if(void 0!==g&&void 0!==g.Output){var h=g.Output.Data.ComplexData.Reference["@href"];void 0!==h&&(c=!0)}}for(var i=0;i<R.length;i++)b===R[i].layerJobId&&(R[i].downloadAvailable=c,R[i].layerJobStatus=f)})}function p(){for(var a=0;a<R.length;a++)void 0!==R[a].statusLocation&&o(R[a].statusLocation,R[a].layerJobId)}function q(a){var b,c,d,e=!1;if(void 0!==a.ExecuteResponse){var f=a.ExecuteResponse["@statusLocation"];c=f.split("id=")[1];var g=a.ExecuteResponse.Status;d=g["@creationTime"],g.ProcessAccepted?(e=!0,b="ProcessAccepted"):g.ProcessStarted?(e=!0,b="ProcessStarted"):g.ProcessPaused?(e=!0,b="ProcessPaused"):g.ProcessFailed?(e=!1,b=m(g.ProcessFailed)):g.ProcessSucceeded?(e=!0,b="ProcessSucceeded"):(e=!1,b="Unknown result type.")}return{status:e,text:b,id:c,creationTime:d}}function r(b){var e=a.defer(),f=P[b];if(void 0!==f){var g=f.wpsUrl,h=f.processId;c.get(d(g+L)).then(function(a){var b=[],e=xml.xmlToJSON(a.data),f=e.Capabilities,i=f.ProcessOfferings,j=i.Process;$.isArray(j)?b=j:b.push(j);for(var k=!1,l=0;l<b.length;l++)if(h===b[l].Identifier){k=!0;break}return k?c.get(d(g+M)+b[l].Identifier):void 0},function(a){e.reject(a)}).then(function(a){for(var b=xml.xmlToJSON(a.data),c=b.ProcessDescriptions,d=c.ProcessDescription,f=d.DataInputs,g=f.Input,h=[],i=0;i<g.length;i++){var j=g[i],k=j["@maxOccurs"],l=j.LiteralData;F!==j.Identifier&&h.push({identifier:j.Identifier,title:j.Title,"abstract":j.Abstract,defaultValues:void 0!==l?l.DefaultValue:void 0,multiple:k>1})}e.resolve(h)})}else e.reject("NOT IMPLEMENTED");return e.promise}function s(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)})}function t(a){var b=2e3,c=+new Date,d=ol.animation.pan({duration:b,source:y.getView().getCenter(),start:c}),e=ol.animation.zoom({duration:b,resolution:y.getView().getResolution(),start:c});y.beforeRender(d,e),y.getView().fit(a.getExtent(),y.getSize())}function u(a){var b=a.Name.replace(E+":","");return c["delete"](I+"/"+E+"/"+b)}function v(a,b,c){var d=a[b],e=a[c];if(void 0!==e){var f=d.instance.getZIndex(),g=e.instance.getZIndex();d.instance.setZIndex(g),e.instance.setZIndex(f),a.splice(b,1),a.splice(c,0,d)}}function w(){return z}function x(){return y}var y,z,A=3,B=19,C="EPSG:4326",D="EPSG:3857",E="melodies-wp7",F="JobID",G="/melodies-geoserver",H="/api/wps-jobs",I="/api/geoserver-delete",J=G+"/geoserver/ows?service=WMS&version=1.3.0&request=GetCapabilities",K=G+"/geoserver/ows?service=WMS&version=1.3.0&request=GetLegendGraphic&FORMAT=image/png&WIDTH=20&HEIGHT=20&TRANSPARENT=true&LEGEND_OPTIONS=fontColor:0xDEDEDE;fontStyle:bold;fontAntiAliasing:true;forceLabels:on;forceRule:True;fontName:SansSerif&LAYER=",L="?service=wps&version=1.0.0&request=getCapabilities",M="?service=wps&version=1.0.0&request=DescribeProcess&identifier=",N="?service=wps&version=1.0.0&ResponseDocument=result_distribution&storeExecuteResponse=true&status=true&request=Execute&identifier=",O={},P={},Q={},R=[],S=new ol.format.WMSCapabilities,T=!1;c.get("/resources/data/proxies.conf").then(function(a){for(var b=a.data.split(/\r\n|\r|\n/),c=0;c<b.length;c++){var d=b[c];if(!d.startsWith("#")){var e=d.split(" ");if(3===e.length&&"="===e[1]){var f=e[0],g=e[2];O[g]=f}}}}),c.get("/resources/data/wps-services.conf").then(function(a){for(var b=a.data.split(/\r\n|\r|\n/),c=0;c<b.length;c++){var d=b[c];if(!d.startsWith("#")){var e=d.split(" ");if(5===e.length&&"="===e[1]&&"="===e[3]){var f=e[0],g=e[2],h=e[4];P[f]={processId:g,wpsUrl:h}}}}});var U=function(){return function(a){var b=y.getView().getZoom(),c=[];return b>7&&c.push(new ol.style.Style({text:new ol.style.Text({text:"PR "+a.get("PR"),textAlign:"center",textBaseline:"middle",font:"Bold 12px Roboto",fill:new ol.style.Fill({color:"#FFFFFF"}),stroke:new ol.style.Stroke({color:"transparent",width:0})})})),c.push(new ol.style.Style({stroke:new ol.style.Stroke({color:"#545454",width:1}),fill:new ol.style.Fill({color:"rgba(96, 96, 96, 0.25)"})})),c}},V=function(a){var b;if(void 0!==a){var c=ol.proj.get(D),d=c.getExtent(),e=a.EX_GeographicBoundingBox,f=ol.proj.transform([e[0],e[1]],C,D),g=ol.proj.transform([e[2],e[3]],C,D);b=[f[0],f[1],g[0],g[1]],b[0]=isNaN(b[0])?d[0]:Math.max(b[0],d[0]),b[1]=isNaN(b[1])?d[1]:Math.max(b[1],d[1]),b[2]=isNaN(b[2])?d[2]:Math.min(b[2],d[2]),b[3]=isNaN(b[3])?d[3]:Math.min(b[3],d[3])}return b};return{initMap:g,isMapInitialized:f,getWmsLayers:e,refreshInformation:h,zoomToLayer:t,deleteLayer:u,getTileGridLayer:w,getMap:x,moveLayer:v,getWPSInformation:r,executeWPSProcess:l,retrieveWPSResultLinks:n,retrieveJobInformation:p}}]),angular.module("MainModule").run(["$templateCache",function(a){a.put("modules/help/DesertificationIndicatorsHelpContent.html",'<h1>{{ \'dialog.help.theDesertificationTitle\' | translate }}</h1> <br> <p align="justify">The purpose of the MELODIES’ desertification service is to create services and tools which facilitate the production and sharing of the UNCCD environmental indicators from open data. The service will support affected countries in their reporting obligations. To best-fit the structure of the required reporting we are developing three self-contained service chains:</p> <img src="../../images/help/service-chain.png" style="height:200px;display: block;margin: 10px auto"> <p align="justify">These sub-services will produce Technical Auxiliary Indicators which relate to some of the requirements of the UNCCD - specified in the latest <a href="http://www.unccd.int/en/programmes/Science/Monitoring-Assessment/Pages/Impact-Refinement.aspx">Advisory Group of Technical Experts for Impact Indicator Refinement (AGTE) recommendations</a>: the Aridity index, Trends in land productivity or function, and Trends in land cover structure.</p>'),a.put("modules/help/LULCHelpContent.html",'<h1>{{ \'dialog.help.theLulcSubServiceTitle\' | translate }}</h1> <br> <p align="justify">The LULC subservice generates LULC maps for the user defined dates and areas. If more than on date is set, the subservice will also generate a LULC changes map.</p> <p align="justify">To generate the LULC maps starts with automatic fetching of the images and <u>pre-processing</u> them to prepare for classification. The pre-processing applies six different algorithms, consisting in coordinate system transformation, radiometric correction, conversion to at-Sensor Brightness Temperature, cloud cover detection and removal, values normalization and Image registration / geometric correction.</p> <p align="justify">The production of the LULC consists on a supervised per-pixel <u>classification</u> of the EO data supported by training data provided by the users. Before proceeding to the classification process the system will identify and remove the outliers from the training areas so as to improve the classification process. The classification algorithm (Linear Discriminant Classifier) is then applied to the spectral bands (except band 6) of 2 Landsat images (these images shall be acquired during the dry and wet seasons, allowing acquiring information of the different phenological phases) and to the NDVI of these images.</p> <p align="justify">The nomenclature used for the Land Cover products contains eleven classes. It was based on the nomenclature derived by LADA and proposed by UNCCD to assess ecosystems and populations affected by land degradation at local, national and regional scales [11]. The nomenclature also was defined taking into consideration the feedback provided by the users in DesertWatch Extension project [7]. All classes and descriptions are compiled in Table X.</p> <table class="table table-condensed" style="font-size: 12px; width: 500px;display: block;margin: 10px auto"> <caption>Table X: LULC nomenclature</caption> <thead> <tr> <th>Class</th> <th>Acronym</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td align="center">Artificial areas</td> <td align="center">1</td> <td align="justify">Primarily non-vegetated areas containing less than four percent vegetation during at least 10 months a year. The environment is influenced by the edaphic substratum. The cover is artificial and a result of human activities. </td> </tr> <tr> <td align="center">Rainfed Agriculture</td> <td align="center">2</td> <td align="justify">Cereals, legumes, fodder crops, root crops and fallow land. Includes flowers and fruit trees (nurseries cultivation) and vegetables, whether open field, under plastic or glass (includes market gardening). Includes aromatic, medicinal and culinary plants. Does not include permanent pastures. </td> </tr> <tr> <td align="center">Irrigated agriculture</td> <td align="center">3</td> <td align="justify">Crops irrigated permanently or periodically, using a permanent infrastructure (irrigation channels, drainage network). Most of these crops cannot be cultivated without an artificial water supply. Does not include sporadically irrigated land. </td> </tr> <tr> <td align="center">Forests</td> <td align="center">4</td> <td align="justify">The main layer consists of closed to open trees. The crown cover is between 100 and 15% (a further sub range can be defined – Closed to Open 100–40%). </td> </tr> <tr> <td align="center">Shrubland</td> <td align="center">5</td> <td align="justify">The main layer consists of closed to open shrubland. The crown cover is between 100 and 15% (a further sub range can be defined – Closed to Open 100–40%). </td> </tr> <tr> <td align="center">Natural grassland</td> <td align="center">6</td> <td align="justify">The main layer consists of closed to open herbaceous vegetation. The crown cover is between 100 and 15% (a further sub range can be defined – Closed to Open 100–40%). </td> </tr> <tr> <td align="center">Sparsely vegetated areas</td> <td align="center">7</td> <td align="justify">20049 - The main layer consists of sparse woody vegetation. The crown cover is between (20-10) and 1%. The sparseness of the vegetation may be further specified. 20058 - The main layer consists of sparse herbaceous vegetation. The crown cover is between (20-10) and 1%. The sparseness of the vegetation may be further specified. </td> </tr> <tr> <td align="center">Burnt areas</td> <td align="center">8</td> <td align="justify">Forested, natural or semi-natural areas affected by recent fires. The image colour of these surfaces must still be black. It excludes the areas that already present forest regeneration </td> </tr> <tr> <td align="center">Beaches, dunes, sand plains and rocks</td> <td align="center">9</td> <td align="justify">Primarily non-vegetated areas containing less than four percent vegetation during at least 10 months a year. The environment is influenced by the edaphic substratum. The cover is natural. Included are areas like bare rock and sands. </td> </tr> <tr> <td align="center">Wetlands</td> <td align="center">10</td> <td align="justify">Primarily vegetated areas containing more than four percent vegetation during at least two months a year. The environment is significantly influenced by the presence of water over extensive periods of time, i.e. water is present for more than three months a year and when water is present less than three months a year, it is present 75 percent of the flooding time. This class includes floating vegetation. </td> </tr> <tr> <td align="center">Water bodies</td> <td align="center">11</td> <td align="justify">The land cover consists of perennial natural water bodies. A further specification can be made in flowing or standing water. </td> </tr> </tbody> </table> <p align="justify">The next stage of the LULC production block consists on post processing the classification result with segmentation/vectorization and generalization algorithms to produce a vector version of the maps and guarantee the Minimum Mapping Unit requirement, respectively. Also following this an assessment of the thematic accuracy of the maps will be performed. The latter is based on a random sample of cases (e.g. pixels) - the testing set – which are compared with the map. The testing set will be a set of samples separated from the user selected samples used for classification.</p> <p align="justify"><u>Change Detection</u> – The detection of land cover changes is performed through a comparative analysis of the independently produced classifications from the time-series. This comparison will be performed at the pixel level and will result in the pixel containing the land cover information for the start and end points of the time series. E.g. class 3 -> class 7, as in T0 -> T0+n.</p> <p align="justify">At this stage of the process, the LULC changes map can skip to post-processing which will then generate two of the three service outputs: The LULC changes map and the Change/No Change mask.</p> <p align="justify"><u>Analysis</u> – The analysis process consists on understanding the land cover changes over the time-series. In practice this means that for each combination of land cover changes a class representing the associated trend will be assigned. For example, in the time-series (T0, T0+1) there is a land cover change from Forest to herbaceous vegetation, the trend class for this situation could be “Deforestation”. This <i>rationale</i> is established in a matrix with every possible combination of land cover changes - Table 5 and Figure 4 exemplify the approach - and a new map is generated with the trend classes properly attributed to each pixel. The matrix should be reviewed and configured by the users.</p> <table class="table table-condensed" style="font-size: 12px;display: block"> <caption>Table X: Possible reclassification matrix for combinations of LULC changes</caption> <tbody> <tr> <td></td> <td align="center" colspan="12">LULC class at T1</td> </tr> <tr> <td rowspan="12">LULC class at T0</td> <td> <p><strong></strong></p> </td> <td> <p><strong>1</strong></p> </td> <td> <p><strong>2</strong></p> </td> <td> <p><strong>3</strong></p> </td> <td> <p><strong>4</strong></p> </td> <td> <p><strong>5</strong></p> </td> <td> <p><strong>6</strong></p> </td> <td> <p><strong>7</strong></p> </td> <td> <p><strong>8</strong></p> </td> <td> <p><strong>9</strong></p> </td> <td> <p><strong>10</strong></p> </td> <td> <p><strong>11</strong></p> </td> </tr> <tr> <td> <p><strong>1</strong></p> </td> <td> <p>no change</p> </td> <td> <p>error</p> </td> <td> <p>error</p> </td> <td> <p>error</p> </td> <td> <p>error</p> </td> <td> <p>error</p> </td> <td> <p>error</p> </td> <td> <p>error</p> </td> <td> <p>Error</p> </td> <td> <p>error</p> </td> <td> <p>error</p> </td> </tr> <tr> <td> <p><strong>2</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td bgcolor="#cba67f"> <p>Abandoned rainfed agriculture</p> </td> <td bgcolor="#cba67f"> <p>Abandoned rainfed agriculture</p> </td> <td bgcolor="#cba67f"> <p>Abandoned rainfed agriculture</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>3</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td bgcolor="#e0bebe"> <p>Abandoned irrigated agriculture</p> </td> <td bgcolor="#e0bebe"> <p>Abandoned irrigated agriculture</p> </td> <td bgcolor="#e0bebe"> <p>Abandoned irrigated agriculture</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>4</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td> <p>no change</p> </td> <td bgcolor="#aa5500"> <p>Deforestation</p> </td> <td bgcolor="#aa5500"> <p>Deforestation</p> </td> <td bgcolor="#aa5500"> <p>Deforestation</p> </td> <td bgcolor="#aa5500"> <p>Deforestation</p> </td> <td bgcolor="#aa5500"> <p>Deforestation</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>5</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#aaaa00"> <p>Natural vegetation decline</p> </td> <td bgcolor="#5d5d5d"> <p>burnt</p> </td> <td bgcolor="#aaaa00"> <p>Natural vegetation decline</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>6</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#aaaa00"> <p>Natural vegetation decline</p> </td> <td bgcolor="#5d5d5d"> <p>burnt</p> </td> <td bgcolor="#aaaa00"> <p>Natural vegetation decline</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>7</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td> <p>no change</p> </td> <td bgcolor="#5d5d5d"> <p>burnt</p> </td> <td bgcolor="#aaaa00"> <p>Natural vegetation decline</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>8</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>9</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td bgcolor="#aaff7f"> <p>Natural vegetation growth</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> <td bgcolor="#00aaff"> <p>Water level rise</p> </td> </tr> <tr> <td> <p><strong>10</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td> <p>error</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> </tr> <tr> <td> <p><strong>11</strong></p> </td> <td bgcolor="#aa0000"> <p>Urban growth</p> </td> <td bgcolor="#ffaa7f"> <p>Rainfed agriculture expansion</p> </td> <td bgcolor="#ff97be"> <p>Irrigated agriculture expansion</p> </td> <td bgcolor="#55aa7f"> <p>Forest expansion</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td> <p>error</p> </td> <td bgcolor="#aaaaff"> <p>Water level drop</p> </td> <td> <p>no change</p> </td> <td> <p>no change</p> </td> </tr> </tbody> </table> <table class="table table-condensed" style="font-size: 12px; width: 200px;display: block;margin: 10px auto"> <caption>Table X: LUCC Nomenclature</caption> <tbody> <tr> <td bgcolor="#E0BEBE" align="center"></td> <td align="left">Abandoned irrigated agriculture</td> </tr> <tr> <td bgcolor="#CBA67F" align="center"></td> <td align="left">Abandoned rainfed agriculture</td> </tr> <tr> <td bgcolor="#ff97be" align="center"></td> <td align="left">Irrigated agriculture expansion</td> </tr> <tr> <td bgcolor="#ffaa7f" align="center"></td> <td align="left">Rainfed agriculture expansion</td> </tr> <tr> <td bgcolor="#5d5d5d" align="center"></td> <td align="left">Burnt</td> </tr> <tr> <td bgcolor="#aa5500" align="center"></td> <td align="left">Deforestation</td> </tr> <tr> <td bgcolor="#55aa7f" align="center"></td> <td align="left">Forest expansion</td> </tr> <tr> <td bgcolor="#aaaa00" align="center"></td> <td align="left">Natural vegetation decline</td> </tr> <tr> <td bgcolor="#aaff7f" align="center"></td> <td align="left">Natural vegetation growth</td> </tr> <tr> <td bgcolor="#aa0000" align="center"></td> <td align="left">Urban growth</td> </tr> <tr> <td bgcolor="#aaaaff" align="center"></td> <td align="left">Water level drop</td> </tr> <tr> <td bgcolor="#00aaff" align="center"></td> <td align="left">Water level rise</td> </tr> </tbody> </table> <p align="justify"><u>Post-processing</u> – At this stage, the map resulting from the analysis process will be subjected to “cleaning” and generalization procedures. A minimum mapping unit (MMU) may be defined and implemented at this stage, following the concretization of user-requirements</p> <p align="justify">The indicator “Trends in land cover structure” could be attained using as metrics/proxy the “vegetative land cover structure”. Intended as the distribution of land cover types of greatest concern for land degradation (excluding artificial surfaces) by characterizing the spatial structure of vegetative land cover; it should include and specify natural habitat classes Error! Reference source not found.. This indicator can be sourced from the products generated from this service. </p> <br> <h1>{{ \'dialog.help.toolTitle\' | translate }}</h1> <br> <img src="../../images/help/tools-lulc-subservice.png" style="height:400px;display: block;margin: 10px auto"> <p align="justify"><u>Tiles</u>: You can either input the Landsat tiles identifiers (Path/Row - PR), or you can drag and select on the map. Separate the tiles with commas.</p> <p align="justify"><u>Years</u>: Set the reference year(s) for the products you want to generate. If you set only one reference year the LULC changes product will not be generated. Separate the reference years with commas.</p> <p align="justify"><u>Minimum Mapping Unit (MMU)</u>: Set a Minimum Mapping Unit in hectares for the generalization procedures. The MMU is applied both to LULC and LULC change products. Set to zero, if no generalization is required.</p> <p align="justify"><u>User Trainning data</u>: Insert a link to a zip file with your training data. Leave it blank if you want products to be generated with default training data.</p>'),
a.put("modules/help/LandConditionHelpContent.html",'<h1>{{ \'dialog.help.theLandConditionSubServiceTitle\' | translate }}</h1> <br> <p align="justify">First, the Area of Interest, time period, and spatial resolution are set according to the reporting needs of the application. Typically, those are, respectively, the whole countries, 10 years, and 1 km. This is agreed between the end users demand on the one hand, and the SERVICE_DEVELOPER on the other hand.</p> <p align="justify">The core computations are then run using the 2dRUE software library, written in the R language. Most of computational processes are transparent to the user, but attention and user input are required at certain identified points. For that reason, it is advisable that this part of the service is run either by the SERVICE_DEVELOPER or by expert technical users who have received appropriate training. Such core computations are illustrated in Figure 2.</p> <img src="../../images/help/land-condition-processing-chain.png" style="height:300px;display: block;margin: 10px auto"> <p align="justify">The delineation of dry lands in the study area is done early in the process because they constitute the UNCCD spatial domain in terms of climatically affected areas. A classification of the FAO-UNEP aridity index is used to detect the target classes of Dry Sub-humid, Semi-arid and Arid zones. The basic fields of the climate archive are mean maximum, mean and mean minimum temperature, and precipitation. These are at a monthly resolution, and are used to compute yearly maps of the FAO-UNEP aridity index throughout the study period. This results in two maps summarizing the study period, one showing the average aridity, and another one showing fluctuations in the dry lands extension associated with inter-annual variations of aridity.</p> <p align="justify">Then, archived time-series of a remotely-sensed vegetation index (e.g. Normalized Differences Vegetation Index, NDVI), and corresponding climate fields, are used to compute monthly estimates of Rain Use Efficiency (RUE) and yearly estimates of Net Primary Productivity (NPP), which support respectively the assessment and the monitoring components of Land Condition.</p> <p align="justify">The assessment is based on comparing the vegetation performance of each location (i.e. the RUE of each grid-cell) to all others, synchronically during the study period. Ecological references are automatically generated through statistical methods. The result is a map of land states, the legend of which addresses levels of ecological maturity: </p> <ol> <li><i>Underperforming anomaly</i></li> <li><i>Baseline performance</i></li> <li><i>Range performance: very degraded</i></li> <li><i>Range performance: degraded</i></li> <li><i>Range performance: productive</i></li> <li><i>Range performance: mature</i></li> <li><i>Reference performance</i></li> <li><i>Overperforming anomaly</i></li> </ol> <p align="justify">The monitoring is based on comparing the productivity (NPP) of each location to itself, diachronically over the study period. Effects of inter-annual variations of aridity, and of the course of time, are separated using a stepwise regression of NPP as a function of year number and year aridity, with as many points as the years in the time-series. After this, only effects of time are interpreted in terms of land degradation or progression, whilst simple responses to climate drift are considered as fluctuations with no impact in productivity trends. The result is a map of land trends, with a legend addressing especially shifts to degradation or maturity:</p> <ol> <li><i>degrading</i></li> <li><i>fluctuating</i></li> <li><i>static</i></li> <li><i>improving</i></li> </ol> <p align="justify">The assessment and monitoring maps are then combined in a final map of Land Condition, where the legend is hierarchical. A first term is made of land states, and a second one is made of land trends.</p> <p align="justify">All the maps are in raster model and can be exported to any of the formats contained in the current version of the GDAL library. Tables and queries can be generated on demand, and facilities to adapt to the PRAIS format can be devised. Visualization is additionally facilitated by the conversion of the raster maps to KMZ format for their use with Google Earth or ArcGIS Explorer. </p> <p align="justify">The new UNCCD indicator “Trends in land productivity or functioning of the Land” is explicitly addressed by the monitoring component of the Land Condition service. It makes the additional refinement to separate intrinsic trends of land productivity, which are truly associated with land degradation or land progression under ecological succession, from extrinsic trends related to climate drift.</p> <br> <h1>{{ \'dialog.help.toolTitle\' | translate }}</h1> <br> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.'),a.put("modules/help/SusceptibilityToHelpContent.html",'<h1>{{ \'dialog.help.theSusceptibilitySubServiceTitle\' | translate }}</h1> <br> <p align="justify">The Desertification Susceptibility indicator is produced by intersecting the LULC previously described with space/time’ climatic and biophysical (which are mainly related to vegetation and soil components) intermediate indicators:</p> <p align="justify">For producing the above indicator, in a first step, it is necessary to compute the following variables with the data provided by the users:</p> <ul> <li>RL1 - number of days per year with precipitation below 1 mm;</li> <li>Soil Brightness – the relation between NIR band and the RED band;</li> <li>Normalized Difference Vegetation Index (NDVI).</li> </ul> <p align="justify">With the previous variables, a set of intermediate indicators are produced:</p> <ul> <li align="justify">Local drought degradation [C(x)] - trend of precipitation extremes (RL1), normalized to a range of [0-1] – values closer to 1 are more prone to become desertified; </li> <li align="justify">Local vegetation status [V(x)] – provides a reclassification of the vegetation status for each LULC pixel, within a range of [0-1] – vegetation with values closer to 1 are more similar to the vegetation identified areas where processes of desertification are more intensive; </li> <li align="justify">Local soil status [S(x)] - provides a reclassification of the soil status for each LULC pixel, within a range of [0-1] – soils with values closer to 1 are more similar to the soils identified in areas where processes of desertification are more intensive; </li> <li align="justify">Vegetation and Soil status [B(x)] – integration of the V(x) and S(x) in one unique intermediate indicator so as to emphasize, for each land cover region, the most relevant information from the intermediate V(x) and S(x) – land cover regions with values closer to 1 are more similar to regions identified in areas where processes of desertification are more intensive. </li> </ul> <p align="justify">The preliminary indicators C(x) and B(x) are then integrated so as to produce the final indicator of Susceptibility to Desertification I(x).</p> <img src="../../images/help/susceptibility-desertification.jpg" style="height:600px;display: block;margin: 10px auto"> <p align="justify">This final indicator provides, for each land cover patch, the susceptibility to desertification in terms of vegetation, soil and climate. I.e., a region with sparse vegetation with low vivacity, or a region with soil more exposed and low values of moisture, organic matter, etc.., may not be prone to desertification; however, if a land cover region has those characteristics and a climate prone to drought, it has a great tendency towards desertification.</p> <br> <h1>{{ \'dialog.help.toolTitle\' | translate }}</h1> <br> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.'),a.put("modules/overview/Overview.html",'<div id="map" class="map" tabindex="1"> </div> <div class="logo"> <img src="../../images/logos/melodies-white.png" style="padding-left:10px;height:40px"> <img src="../../images/logos/desertification.png" style="height:40px"> </div> <div id="menu" class="menu"> <button type="button" class="btn btn-default menu-button" ng-click="openTileSelectionDialog(\'lulc-service\', \'dialog.process.lulc\')" ng-disabled="tileSelectionDialogId !== undefined">{{ \'menu.buttons.lulc\' | translate }} </button> <button type="button" class="btn btn-default menu-button" ng-click="openProcessInvokeDialog(\'lc-service\', \'dialog.process.landCondition\')" ng-disabled="tileSelectionDialogId !== undefined">{{ \'menu.buttons.landCondition\' | translate }} </button> <button type="button" class="btn btn-default menu-button" ng-click="openProcessInvokeDialog(\'susceptibility-service\', \'dialog.process.susceptibilityTo\')" ng-disabled="tileSelectionDialogId !== undefined">{{ \'menu.buttons.susceptibilityTo\' | translate }} </button> <button type="button" class="btn btn-default menu-button-help" ng-click="openHelpDialog()">{{ \'menu.buttons.help\' | translate }} </button> </div> <div id="layers" class="layers"> <button type="button" class="layer-button layer-collapse-button" data-toggle="collapse" data-target="#body"></button> <label class="layers-title">{{ \'layers.title\' | translate }}</label> <div id="body" class="layers-body collapse"> <label ng-repeat="layer in layers" class="layer-item"> <div> <div class="layer-item-label" title="{{layer.layerJobId}}"> <input type="checkbox" ng-checked="isLayerVisible(layer)" ng-click="setLayerVisible($event, layer)"> {{layer.Title}} </div> <div class="layer-item-menu"> <button type="button" class="layer-button fa fa-arrow-down" ng-click="moveLayerDown($index)"></button> <button type="button" class="layer-button fa fa-arrow-up" ng-click="moveLayerUp($index)"></button> <button type="button" class="layer-button fa-search" ng-click="zoomToLayer(layer)"></button> <button type="button" class="layer-button fa-download" ng-click="downloadLayer(layer)" ng-disabled="!layer.downloadAvailable"></button> <button type="button" class="layer-button fa-trash" ng-click="deleteLayer(layer)"></button> </div> </div> <label class="layers-item-details">{{ \'dialog.process.process\' | translate }} {{layer.processId}} [{{layer.layerJobStatus}}]</label> </label> <script>$("#body").collapse({toggle: true});</script> </div> </div> <div id="legend" class="legend"> <div> <span class="pull-right"> <label class="legend-title">{{ \'legend.title\' | translate }}</label> <button type="button" class="layer-button layer-collapse-button" data-toggle="collapse" data-target="#legend-body"></button> </span> </div> <div id="legend-body" class="legend-body collapse"> <script>$("#legend-body").collapse({toggle: true});</script> </div> </div> <div class="branding-images"> <img src="../../images/logos/csw-white.png" style="height:40px"> <img src="../../images/logos/csic-white.png" style="padding-left:10px;height:20px"> <img src="../../images/logos/cerena-white.png" style="padding-left:10px;height:30px"> </div> <!--<div class="branding-images">--> <!--<img src="images/csw-white.png" height="40" name="csw" onmouseover="csw.height=\'80\';" onmouseout="csw.height=\'40\';">--> <!--<img src="images/csic-white.png" height="40" name="csic" onmouseover="csic.height=\'80\';" onmouseout="csic.height=\'40\';">--> <!--<img src="images/cerena-white.png" height="40" name="cerena" onmouseover="cerena.height=\'80\';" onmouseout="cerena.height=\'40\';">--> <!--<img src="images/melodies-white.png" height="40" name="melodies" onmouseover="melodies.height=\'80\';" onmouseout="melodies.height=\'40\';">--> <!--</div>-->'),a.put("modules/overview/OverviewConfirmationDialog.html",'<div class="general-confimation-dialog"> <div> <i class="fa fa-trash"></i> <label class="margin-left-5" autofocus>{{ \'dialog.confirmation.deleteMessage\' | translate }}</label> <label class="margin-left-5" autofocus>\'{{ ngDialogData.itemName }}\'?</label> </div> <div style="float: right"> <button class="btn btn-default confirmation-dialog-ok-btn" ng-click="confirm(1)">{{ \'dialog.confirmation.delete\' | translate }} </button> <button class="btn btn-default confirmation-dialog-ok-btn" ng-click="closeThisDialog(0)">{{ \'dialog.confirmation.cancel\' | translate }} </button> </div> </div>'),a.put("modules/overview/OverviewHelpDialog.html",'<div class="menu-dialog-title">{{ \'dialog.help.title\' | translate }}</div> <div class="menu-dialog-body"> <ul id="tabs" class="nav nav-tabs help-tabs"> <!-- The data-tab attribute specifies the ID of the tab to open when clicked. --> <li><a data-tab="#desertification" href="#">{{ \'dialog.help.desertificationTitle\' | translate }}</a></li> <li><a data-tab="#lulcSubService" href="#">{{ \'dialog.help.lulcSubServiceTitle\' | translate }}</a></li> <li><a data-tab="#landConditionSubService" href="#">{{ \'dialog.help.landConditionSubServiceTitle\' | translate }}</a></li> <li><a data-tab="#susceptibilitySubService" href="#">{{ \'dialog.help.susceptibilitySubServiceTitle\' | translate }}</a></li> </ul> <!-- data-tabs-default is provided to make sure that tab1 is loaded on start. --> <div id="desertification" data-tabs-default data-tab-content> <div class="help-section"> <div ng-include="\'modules/help/DesertificationIndicatorsHelpContent.html\'"></div> </div> </div> <div id="lulcSubService" data-tab-content> <div class="help-section"> <div ng-include="\'modules/help/LULCHelpContent.html\'"></div> </div> </div> <div id="landConditionSubService" data-tab-content> <div class="help-section"> <div ng-include="\'modules/help/LandConditionHelpContent.html\'"></div> </div> </div> <div id="susceptibilitySubService" data-tab-content> <div class="help-section"> <div ng-include="\'modules/help/SusceptibilityToHelpContent.html\'"></div> </div> </div> <script>$(function () {\r\n            $(\'#tabs a\').tabs({\r\n                inAnimation: \'fadeIn\',\r\n                outAnimation: \'fadeOut\',\r\n                speed: 200,\r\n                activeClass: \'tab-active\',\r\n                complete: function (element, tab) {\r\n                    // code to run on tab click complete\r\n                },\r\n                animationComplete: function (tab) {\r\n                    // code to run on show animation completion\r\n                },\r\n                watchHash: true,\r\n                defaultFromHash: true\r\n            });\r\n        });</script> </div>'),a.put("modules/overview/OverviewProcessDialog.html",'<div class="menu-dialog-title">{{ ngDialogData.processTitle | translate }}</div> <div class="menu-dialog-body"> <div> <div class="menu-dialog-lulc-error-label">{{serviceError}}</div> </div> <div ng-repeat="parameter in parameters track by $index"> <div class="margin-bottom-10">{{ parameter.title}}</div> <form role="form" ng-submit="addValue(parameter.identifier, parameterValue)"> <p class="input-group width-100"> <input type="text" ng-model="addValues[parameter.identifier]" placeholder="{{ parameter.abstract }}" class="form-control menu-dialog-lulc-input"> <span class="input-group-btn" ng-show="parameter.multiple"> <button class="menu-dialog-lulc-btn fa fa-plus"></button> </span> </p> </form> <p class="input-group width-100" ng-repeat="value in values[parameter.identifier] track by $index"> <input type="text" ng-model="values[parameter.identifier][$index]" class="form-control menu-dialog-lulc-input-list"> <span class="input-group-btn"> <button class="menu-dialog-lulc-btn fa fa-minus" ng-click="removeValue(parameter.identifier, $index)"></button> </span> </p> </div> <div> <button class="btn btn-default menu-dialog-lulc-btn-run" ng-click="runProcess()" ng-show="!serviceError">{{ \'dialog.process.runProcess\' | translate }} </button> </div> <div> <div class="menu-dialog-lulc-error-label">{{errorMessage}}</div> </div> </div>'),a.put("modules/overview/OverviewProcessSuccessDialog.html",'<div class="menu-lulc-confimation-dialog"> <div style="padding-left: 100px"> <i class="fa fa-play"></i> <label class="margin-left-5" autofocus>{{ \'dialog.process.process\' | translate }}</label> <label class="margin-left-5" autofocus>{{ ngDialogData.processId }}</label> <label class="margin-left-5" autofocus>{{ \'dialog.process.started\' | translate }}.</label> </div> <label class="margin-left-5" autofocus>{{ \'dialog.process.resultsMessage\' | translate }}.</label> </div>'),a.put("modules/overview/OverviewTileSelectionDialog.html",'<div class="menu-dialog-tile-selection"> <i class="fa fa-globe"></i> <label class="margin-left-5" autofocus>{{ \'dialog.tileSelection.message\' | translate }}</label> <div id="menu" class="menu"> <button id="proceed-button" type="button" class="btn btn-default menu-button" ng-click="openProcessInvokeDialog(ngDialogData.processIdentifier,ngDialogData.processTitle, selectedTiles())"> {{ \'dialog.tileSelection.proceed\' | translate }} </button> <button type="button" class="btn btn-default menu-button" ng-click="closeThisDialog(\'Some value\')">{{ \'dialog.tileSelection.cancel\' | translate }} </button> </div> </div>')}]);